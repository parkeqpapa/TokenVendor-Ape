{"manifest": "ethpm/3", "sources": {"TokenVendor.vy": {"urls": [], "checksum": {"algorithm": "md5", "hash": "0x37fecb846a69127b345dbdb550ec34e6"}, "content": "# @version 0.3.4\n\nfrom vyper.interfaces import ERC20\n\n## ERC20 variables\nNAME: constant(String[20]) = \"TOKEN\"\nSYMBOL: constant(String[20]) = \"TOK\"\nDECIMALS: constant(uint8) = 18\ntotalSupply: public(uint256)\nbalanceOf: public(HashMap[address, uint256])\nallowance: public(HashMap[address, HashMap[address, uint256]])\n\nowner: address\n\ntokensPerETH: constant(uint256) = 100\n\n@external\ndef __init__():\n    self.owner = msg.sender\n    self._mint(self, 100_000_000_000_000)\n\n## ERC20 events\n\nevent Approval:\n    owner: indexed(address)\n    spender: indexed(address)\n    value: uint256\nevent Transfer:\n    _from: indexed(address)\n    to: indexed(address)\n    value: uint256\n\n@pure\n@external\ndef name() -> String[20]:\n    return NAME\n\n@pure\n@external\ndef symbol() -> String[20]:\n    return SYMBOL\n\n@pure\n@external\ndef decimals() -> uint8:\n    return DECIMALS\n\n\n@view\n@external\ndef get_owner() -> address:\n    return self.owner\n\n@internal\ndef _mint(to: address, _value: uint256):\n    self.totalSupply += _value\n    self.balanceOf[to] += _value\n    log Transfer(empty(address), to, _value)\n\n@internal\ndef _burn(_from: address, _value: uint256):\n    self.balanceOf[_from] -= _value\n    self.totalSupply -= _value\n    log Transfer(_from, empty(address), _value)\n    \n@internal\ndef _approve(owner: address, spender: address, _value: uint256):\n    self.allowance[owner][spender] = _value\n    log Approval(owner, spender, _value)\n    \n@internal\ndef _transfer(_from: address, to: address, _value: uint256):\n    self.balanceOf[_from] -= _value\n    self.balanceOf[to] += _value\n    log Transfer(_from, to, _value)\n\n@external\ndef approve(spender: address, _value: uint256) -> bool:\n    self._approve(msg.sender, spender, _value)\n    return True\n\n@external\ndef transfer(to: address, _value: uint256) -> bool:\n    self._transfer(msg.sender, to, _value)\n    return True\n\n@external\ndef transferFrom(_from: address, to: address, _value: uint256) -> bool: \n    if self.allowance[_from][msg.sender] != max_value(int256):\n        self.allowance[_from][msg.sender] -= _value\n    self._transfer(_from, to, _value)\n    return True\n\n    \n@payable\n@external\ndef buyToken() -> (uint256):\n    assert msg.value > 0\n    amountOfToken: uint256 = tokensPerETH * msg.value\n\n    self._transfer(self, msg.sender, amountOfToken)\n\n    return amountOfToken\n\n@external\ndef withdraw():\n    assert msg.sender == self.owner\n    contractBalance: uint256 = self.balanceOf[self]\n    self._transfer(self, self.owner, contractBalance)\n    \n    selfdestruct(self.owner)\n\n\n@external\ndef sellTokens(totalTokens: uint256):\n    \n    totalBalance: uint256 = self.balanceOf[msg.sender]\n    assert totalBalance > totalTokens\n\n    operationAmount: uint256 = totalTokens / tokensPerETH\n    total: uint256 = self.balance\n    assert total > operationAmount\n\n    self._transfer(msg.sender, self, totalTokens)\n\n    send(msg.sender, operationAmount)", "references": [], "imports": []}}, "contractTypes": {"TokenVendor": {"contractName": "TokenVendor", "sourceId": "TokenVendor.vy", "deploymentBytecode": {"bytecode": "0x346106cb573360035530604052655af3107a400060605261001e61065b565b61062b6100306100003961062b610000f36003361161000c57610485565b60003560e01c63a4821719811861005b576004361861061b57341561061b57346064810281606482041861061b57905060c052306040523360605260c05160805261005561059b565b602060c0f35b3461061b576306fdde0381186100e8576004361861061b5760208060805260056040527f544f4b454e00000000000000000000000000000000000000000000000000000060605260408160800181518082526020830160208301815181525050508051806020830101601f82600003163682375050601f19601f8251602001011690509050810190506080f35b6395d89b418118610170576004361861061b5760208060805260036040527f544f4b000000000000000000000000000000000000000000000000000000000060605260408160800181518082526020830160208301815181525050508051806020830101601f82600003163682375050601f19601f8251602001011690509050810190506080f35b63313ce567811861018e576004361861061b57601260405260206040f35b630ac298dc81186101ad576004361861061b5760035460405260206040f35b63095ea7b381186101f1576044361861061b576004358060a01c61061b5760c0523360405260c0516060526024356080526101e6610542565b600160e052602060e0f35b63a9059cbb8118610235576044361861061b576004358060a01c61061b5760c0523360405260c05160605260243560805261022a61059b565b600160e052602060e0f35b6323b872dd8118610308576064361861061b576004358060a01c61061b5760c0526024358060a01c61061b5760e0527f7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff600260c05160205260005260406000208033602052600052604060002090505418156102e157600260c0516020526000526040600020803360205260005260406000209050805460443580820382811161061b57905090508155505b60c05160405260e0516060526044356080526102fb61059b565b6001610100526020610100f35b633ccfd60b8118610354576004361861061b57600354331861061b5760013060205260005260406000205460c0523060405260035460605260c05160805261034e61059b565b600354ff005b636c11bcd381186103cf576024361861061b5760013360205260005260406000205460c05260043560c051111561061b5760043560648104905060e052476101005260e05161010051111561061b5733604052306060526004356080526103b961059b565b600060006000600060e051336000f11561061b57005b6318160ddd81186103ee576004361861061b5760005460405260206040f35b6370a082318118610429576024361861061b576004358060a01c61061b57604052600160405160205260005260406000205460605260206060f35b63dd62ed3e8118610483576044361861061b576004358060a01c61061b576040526024358060a01c61061b576060526002604051602052600052604060002080606051602052600052604060002090505460805260206080f35b505b60006000fd61061b579050905060005560016040516020526000526040600020805460605180820182811061061b579050905081555060405160007fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60605160805260206080a35661061b579050905081555060005460605180820382811161061b579050905060005560006040517fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60605160805260206080a3565b608051600260405160205260005260406000208060605160205260005260406000209050556060516040517f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92560805160a052602060a0a3565b60016040516020526000526040600020805460805180820382811161061b579050905081555060016060516020526000526040600020805460805180820182811061061b57905090508155506060516040517fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60805160a052602060a0a3565b600080fda1657679706572830003045b6000546060518082018281106106cb57905090506000556001604051602052600052604060002080546060518082018281106106cb579050905081555060405160007fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60605160805260206080a3565b600080fd"}, "runtimeBytecode": {"bytecode": "0x6003361161000c57610485565b60003560e01c63a4821719811861005b576004361861061b57341561061b57346064810281606482041861061b57905060c052306040523360605260c05160805261005561059b565b602060c0f35b3461061b576306fdde0381186100e8576004361861061b5760208060805260056040527f544f4b454e00000000000000000000000000000000000000000000000000000060605260408160800181518082526020830160208301815181525050508051806020830101601f82600003163682375050601f19601f8251602001011690509050810190506080f35b6395d89b418118610170576004361861061b5760208060805260036040527f544f4b000000000000000000000000000000000000000000000000000000000060605260408160800181518082526020830160208301815181525050508051806020830101601f82600003163682375050601f19601f8251602001011690509050810190506080f35b63313ce567811861018e576004361861061b57601260405260206040f35b630ac298dc81186101ad576004361861061b5760035460405260206040f35b63095ea7b381186101f1576044361861061b576004358060a01c61061b5760c0523360405260c0516060526024356080526101e6610542565b600160e052602060e0f35b63a9059cbb8118610235576044361861061b576004358060a01c61061b5760c0523360405260c05160605260243560805261022a61059b565b600160e052602060e0f35b6323b872dd8118610308576064361861061b576004358060a01c61061b5760c0526024358060a01c61061b5760e0527f7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff600260c05160205260005260406000208033602052600052604060002090505418156102e157600260c0516020526000526040600020803360205260005260406000209050805460443580820382811161061b57905090508155505b60c05160405260e0516060526044356080526102fb61059b565b6001610100526020610100f35b633ccfd60b8118610354576004361861061b57600354331861061b5760013060205260005260406000205460c0523060405260035460605260c05160805261034e61059b565b600354ff005b636c11bcd381186103cf576024361861061b5760013360205260005260406000205460c05260043560c051111561061b5760043560648104905060e052476101005260e05161010051111561061b5733604052306060526004356080526103b961059b565b600060006000600060e051336000f11561061b57005b6318160ddd81186103ee576004361861061b5760005460405260206040f35b6370a082318118610429576024361861061b576004358060a01c61061b57604052600160405160205260005260406000205460605260206060f35b63dd62ed3e8118610483576044361861061b576004358060a01c61061b576040526024358060a01c61061b576060526002604051602052600052604060002080606051602052600052604060002090505460805260206080f35b505b60006000fd61061b579050905060005560016040516020526000526040600020805460605180820182811061061b579050905081555060405160007fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60605160805260206080a35661061b579050905081555060005460605180820382811161061b579050905060005560006040517fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60605160805260206080a3565b608051600260405160205260005260406000208060605160205260005260406000209050556060516040517f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92560805160a052602060a0a3565b60016040516020526000526040600020805460805180820382811161061b579050905081555060016060516020526000526040600020805460805180820182811061061b57905090508155506060516040517fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60805160a052602060a0a3565b600080fda165767970657283000304"}, "abi": [{"type": "event", "name": "Approval", "inputs": [{"name": "owner", "type": "address", "indexed": true}, {"name": "spender", "type": "address", "indexed": true}, {"name": "value", "type": "uint256", "indexed": false}], "anonymous": false}, {"type": "event", "name": "Transfer", "inputs": [{"name": "_from", "type": "address", "indexed": true}, {"name": "to", "type": "address", "indexed": true}, {"name": "value", "type": "uint256", "indexed": false}], "anonymous": false}, {"type": "constructor", "stateMutability": "nonpayable", "inputs": []}, {"type": "function", "name": "name", "stateMutability": "pure", "inputs": [], "outputs": [{"name": "", "type": "string"}]}, {"type": "function", "name": "symbol", "stateMutability": "pure", "inputs": [], "outputs": [{"name": "", "type": "string"}]}, {"type": "function", "name": "decimals", "stateMutability": "pure", "inputs": [], "outputs": [{"name": "", "type": "uint8"}]}, {"type": "function", "name": "get_owner", "stateMutability": "view", "inputs": [], "outputs": [{"name": "", "type": "address"}]}, {"type": "function", "name": "approve", "stateMutability": "nonpayable", "inputs": [{"name": "spender", "type": "address"}, {"name": "_value", "type": "uint256"}], "outputs": [{"name": "", "type": "bool"}]}, {"type": "function", "name": "transfer", "stateMutability": "nonpayable", "inputs": [{"name": "to", "type": "address"}, {"name": "_value", "type": "uint256"}], "outputs": [{"name": "", "type": "bool"}]}, {"type": "function", "name": "transferFrom", "stateMutability": "nonpayable", "inputs": [{"name": "_from", "type": "address"}, {"name": "to", "type": "address"}, {"name": "_value", "type": "uint256"}], "outputs": [{"name": "", "type": "bool"}]}, {"type": "function", "name": "buyToken", "stateMutability": "payable", "inputs": [], "outputs": [{"name": "", "type": "uint256"}]}, {"type": "function", "name": "withdraw", "stateMutability": "nonpayable", "inputs": [], "outputs": []}, {"type": "function", "name": "sellTokens", "stateMutability": "nonpayable", "inputs": [{"name": "totalTokens", "type": "uint256"}], "outputs": []}, {"type": "function", "name": "totalSupply", "stateMutability": "view", "inputs": [], "outputs": [{"name": "", "type": "uint256"}]}, {"type": "function", "name": "balanceOf", "stateMutability": "view", "inputs": [{"name": "arg0", "type": "address"}], "outputs": [{"name": "", "type": "uint256"}]}, {"type": "function", "name": "allowance", "stateMutability": "view", "inputs": [{"name": "arg0", "type": "address"}, {"name": "arg1", "type": "address"}], "outputs": [{"name": "", "type": "uint256"}]}], "userdoc": {}, "devdoc": {}}}}